"use strict";var adpp=angular.module("SesList",["ui.bootstrap","btford.socket-io"]);adpp.factory("$socket",["socketFactory",function(a){return a()}]),adpp.controller("SesListController",["$scope","$http","$socket","$uibModal",function(a,b,c,d){var e=a;e.sessions=[],e.sesOpen=!1,e.invCode="",e.showCodeError=!1,e.routes={L:"to-visor",M:"to-semantic",S:"to-select",E:"to-differential"},e.init=function(){e.updateSessions(),c.on("stateChange",function(f){console.log("SOCKET.IO",f),e.updateSessions()}),e.showName()},e.showName=function(){b.post("get-my-name").success(function(f){e.username=f.name,e.mylang=f.lang})},e.updateSessions=function(){b({url:"get-session-list",method:"post"}).success(function(f){e.sessions=f})},e.openSes=function(){e.sesOpen=!0},e.enterCode=function(){var f={code:e.invCode.toLowerCase()};b.post("enter-session-code",f).success(function(g){"ok"==g.status?window.location.replace(g.redirect):d.open({template:"<div><div class=\"modal-header\"><h4>Error</h4></div><div class=\"modal-body\"><p>El c\\xF3digo ingresado no es v\\xE1lido</p></div></div>"})})},e.changeLang=function(){var f="english"==e.mylang?"spanish":"english";b.post("update-lang",{lang:f}).success(function(){e.showName()})},e.init()}]);
