"use strict";var adpp=angular.module("SesList",["btford.socket-io"]);adpp.factory("$socket",["socketFactory",function(a){return a()}]),adpp.controller("SesListController",["$scope","$http","$socket",function(a,b,c){var d=a;d.sessions=[],d.sesOpen=!1,d.invCode="",d.showCodeError=!1,d.init=function(){d.updateSessions(),c.on("stateChange",function(e){console.log("SOCKET.IO",e),d.updateSessions()}),d.showName()},d.showName=function(){b.post("get-my-name").success(function(e){d.username=e.name})},d.updateSessions=function(){b({url:"get-session-list",method:"post"}).success(function(e){d.sessions=e})},d.openSes=function(){d.sesOpen=!0},d.enterCode=function(){var e={code:d.invCode.toLowerCase()};b.post("enter-session-code",e).success(function(f){"ok"==f.status?window.location.replace(f.redirect):d.showCodeError=!0})},d.init()}]);
