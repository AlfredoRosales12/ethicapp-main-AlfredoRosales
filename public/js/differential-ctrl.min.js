"use strict";var app=angular.module("Differential",["ui.tree","btford.socket-io","timer","ui-notification"]);app.factory("$socket",["socketFactory",function(a){return a()}]),app.controller("DifferentialController",["$scope","$http","$timeout","$socket","Notification",function(a,b,c,d){var g=a;g.iteration=1,g.myUid=-1,g.documents=[],g.dfs=[],g.showDoc=!0,g.selectedDocument=0,g.selectedDF=0,g.sesStatusses=["individual","anon","teamWork","finished"],g.lang="spanish",g.init=function(){g.getSesInfo(),d.on("stateChange",function(j){console.log("SOCKET.IO",j),j.ses==g.sesId&&window.location.reload()}),g.getMe()},g.getSesInfo=function(){b({url:"get-ses-info",method:"post"}).success(function(j){g.iteration=j.iteration+1,g.myUid=j.uid,g.sesName=j.name,g.sesId=j.id,g.sesSTime=j.stime,g.sesDescr=j.descr,0<g.iteration&&(g.loadDocuments(),g.loadDifferentials())})},g.getMe=function(){b.post("get-my-name").success(function(j){g.lang=j.lang,g.updateLang(g.lang)})},g.loadDocuments=function(){b({url:"get-documents",method:"post"}).success(function(j){g.documents=j})},g.loadDifferentials=function(){b({url:"get-differentials",method:"post"}).success(function(j){g.dfs=j})},g.selectDocument=function(j){g.selectedDocument=j,g.showDoc=!0},g.selectDF=function(j){g.selectedDF=j,g.showDoc=!1};var h=function notify(j,k){$uibModal.open({template:"<div><div class=\"modal-header\"><h4>"+j+"</h4></div><div class=\"modal-body\"><p>"+k+"</p></div></div>"})};g.openComment=function(j){h("Comentario",j)},g.showInfo=function(){h("Factor Detonante",g.sesDescr,!1)},g.updateLang=function(j){b.get("data/"+j+".json").success(function(k){window.DIC=k})},g.changeLang=function(){g.lang="english"==g.lang?"spanish":"english",g.updateLang(g.lang)},g.init()}]),window.DIC=null,window.warnDIC={},app.filter("lang",function(){function a(b){if(null!=window.DIC)return window.DIC[b]?window.DIC[b]:(window.warnDIC[b]||(console.warn("Cannot find translation for ",b),window.warnDIC[b]=!0),b)}return a.$stateful=!0,a});var indexById=function(a,b){return a.findIndex(function(c){return c.id==b})};
