"use strict";var app=angular.module("Select",[]);app.controller("SelectController",["$scope","$http",function(a,b){var c=a;c.selectedQs=-1,c.iteration=1,c.myUid=-1,c.questions=[],c.otherAnswsers={},c.answers={},c.comments={},c.optLabels=["A","B","C","D","E"],c.sent={},c.ansIter1={},c.ansIter2={},c.init=function(){c.loadQuestions(),c.getSesInfo()},c.getSesInfo=function(){b({url:"get-ses-info",method:"post"}).success(function(d){c.iteration=d.iteration,c.myUid=d.uid,c.sesName=d.name,1<c.iteration&&b({url:"get-team-selection",method:"post",data:{iteration:1}}).success(function(e){e.forEach(function(f){c.ansIter1[f.qid]=c.ansIter1[f.qid]||{},c.ansIter1[f.qid][f.uid]={answer:f.answer,comment:f.comment}})}),2<c.iteration&&b({url:"get-team-selection",method:"post",data:{iteration:2}}).success(function(e){e.forEach(function(f){c.ansIter2[f.qid]=c.ansIter2[f.qid]||{},c.ansIter2[f.qid][f.uid]={answer:f.answer,comment:f.comment}})}),c.loadAnswers()})},c.loadQuestions=function(){b({url:"get-questions",method:"post"}).success(function(d){c.questions=d,c.questions.forEach(function(e){e.options=e.options.split("\n")})})},c.loadAnswers=function(){b({url:"get-answers",method:"post",data:{iteration:Math.min(3,c.iteration)}}).success(function(d){d.forEach(function(e){c.answers[e.qid]=e.answer,c.comments[e.qid]=e.comment,c.sent[e.qid]=!0})})},c.setAnswer=function(d,e){c.answers[d]=e},c.selectQuestion=function(d){c.selectedQs=d},c.nextQuestion=function(){c.selectedQs>=c.questions.length-1||c.selectQuestion(seld.selectedQs+1)},c.prevQuestion=function(){0>=c.selectedQs||c.selectQuestion(seld.selectedQs-1)},c.sendAnswer=function(d){var e={qid:d,answer:c.answers[d],comment:c.comments[d],iteration:c.iteration};b({url:"send-answer",method:"post",data:e}).success(function(f){"ok"==f.status&&(c.sent[e.qid]=!0)})},c.init()}]);
