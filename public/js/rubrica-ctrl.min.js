"use strict";var app=angular.module("Rubrica",[]);app.controller("RubricaController",["$scope","$http",function(a,b){var c=a;c.criterios=[],c.reports=[],c.iteration=-1,c.myUid=-1,c.init=function(){c.getReports(),c.getRubrica()},c.getReports=function(){b({url:"get-ses-info",method:"post"}).success(function(d){c.iteration=d.iteration,c.myUid=d.uid,5==c.iteration?b({url:"get-active-example-report",method:"post"}).success(function(e){c.reports=[e],c.fillSelections()}):6==c.iteration&&b({url:"get-paired-report",method:"post"}).success(function(e){c.reports=e,c.fillSelections()})})},c.getRubrica=function(){b({url:"get-rubrica",method:"post"}).success(function(d){c.criterios=d})},c.checkCriteria=function(d){return null!=d.select&&c.criterios.reduce(function(e,f){return null!=d.select[f.id]&&e},!0)},c.sendSelection=function(d){c.checkCriteria(d)&&c.criterios.forEach(function(e){var f={cid:e.id,sel:d.select[e.id],rid:d.id};b({url:"send-criteria-selection",method:"post",data:f}).success(function(){console.log("ok")})})},c.fillSelections=function(){c.reports.forEach(function(d){var e={rid:d.id};b({url:"get-criteria-selection",method:"post",data:e}).success(function(f){d.select={},f.forEach(function(g){d.select[g.cid]=g.selection})})})},c.init()}]);
